<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flower Order - Home</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100">
  <!-- Header -->
  <header class="bg-green-600 text-white py-4 mb-6">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-2xl font-bold">Flower Order</h1>
      <nav>
        <button id="showLoginBtn" class="px-4 hover:underline">Login</button>
        <button id="showDashboardBtn" class="px-4 hover:underline hidden">Dashboard</button>
        <button id="logoutBtn" class="px-4 hover:underline hidden">Logout</button>
      </nav>
    </div>
  </header>

  <!-- Login Section (hidden initially) -->
  <section id="loginSection" class="container mx-auto max-w-md bg-white p-6 rounded shadow mb-8 hidden">
    <h2 class="text-2xl font-bold mb-6 text-center">User Login</h2>
    <form id="loginForm" class="space-y-4">
      <div>
        <label for="loginEmail" class="block mb-1 font-medium">Email</label>
        <input type="email" id="loginEmail" required class="w-full p-2 border border-gray-300 rounded" />
      </div>
      <div>
        <label for="loginPassword" class="block mb-1 font-medium">Password</label>
        <input type="password" id="loginPassword" required class="w-full p-2 border border-gray-300 rounded" />
      </div>
      <button type="submit" class="w-full bg-green-600 text-white py-2 rounded">Login</button>
    </form>
  </section>

  <!-- Dashboard Section (hidden initially) -->
  <section id="dashboardSection" class="container mx-auto max-w-3xl mb-8 hidden">
    <h2 class="text-3xl font-bold mb-6 text-center">Your Orders</h2>
    <div id="ordersList" class="space-y-4"></div>
  </section>

  <!-- Hero Section -->
  <section class="bg-white py-16">
    <div class="container mx-auto text-center">
      <h2 class="text-4xl font-bold mb-4">Order Fresh Flowers Online</h2>
      <p class="text-gray-600 mb-6">Choose from a wide variety of flowers for every occasion.</p>
      <a href="#products" class="bg-green-600 text-white py-2 px-4 rounded">Browse Flowers</a>
    </div>
  </section>

  <!-- Products Section -->
  <section id="products" class="py-16 bg-gray-100">
    <div class="container mx-auto">
      <h2 class="text-3xl font-bold text-center mb-8">Our Flowers</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        <div class="bg-white p-4 rounded shadow">
          <img src="pictures/roses.jpg.jpg" alt="Rose Image" class="mb-4 w-full h-48 object-cover" />
          <h3 class="text-lg font-bold mb-2">Red Roses</h3>
          <p class="text-gray-600 mb-2">A classic bouquet of red roses.</p>
          <p class="text-green-600 font-bold mb-2">$25.00</p>
          <button class="orderNowBtn bg-green-600 text-white py-2 px-4 rounded w-full" data-flower="Red Roses">Order Now</button>
        </div>
        <div class="bg-white p-4 rounded shadow">
          <img src="pictures/lily.jpeg" alt="Lilies" class="mb-4 w-full h-48 object-cover" />
          <h3 class="text-lg font-bold mb-2">Lilies</h3>
          <p class="text-gray-600 mb-2">Beautiful white lilies.</p>
          <p class="text-green-600 font-bold mb-2">$30.00</p>
          <button class="orderNowBtn bg-green-600 text-white py-2 px-4 rounded w-full" data-flower="Lilies">Order Now</button>
        </div>
        <div class="bg-white p-4 rounded shadow">
          <img src="mridulsingh406/tulip.jpeg" alt="Tulips" class="mb-4 w-full h-48 object-cover" />
          <h3 class="text-lg font-bold mb-2">Tulips</h3>
          <p class="text-gray-600 mb-2">Colorful tulip bouquet.</p>
          <p class="text-green-600 font-bold mb-2">$20.00</p>
          <button class="orderNowBtn bg-green-600 text-white py-2 px-4 rounded w-full" data-flower="Tulips">Order Now</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Order Form Modal (hidden initially) -->
  <div id="orderModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-6 rounded shadow max-w-md w-full relative">
      <button id="closeOrderModal" class="absolute top-2 right-2 text-gray-600 hover:text-gray-900 font-bold">&times;</button>
      <h2 class="text-2xl font-bold mb-6 text-center">Place Your Order</h2>
      <form id="orderForm" class="space-y-4">
        <div>
          <label for="name" class="block mb-1 font-medium">Name</label>
          <input type="text" id="name" name="name" class="w-full p-2 border border-gray-300 rounded" required />
        </div>
        <div>
          <label for="email" class="block mb-1 font-medium">Email</label>
          <input type="email" id="email" name="email" class="w-full p-2 border border-gray-300 rounded" required />
        </div>
        <div>
          <label for="flower" class="block mb-1 font-medium">Flower Type</label>
          <input type="text" id="flower" name="flower" readonly class="w-full p-2 border border-gray-300 rounded bg-gray-200" />
        </div>
        <div>
          <label for="quantity" class="block mb-1 font-medium">Quantity</label>
          <input type="number" id="quantity" name="quantity" min="1" value="1" class="w-full p-2 border border-gray-300 rounded" required />
        </div>
        <div>
          <label for="address" class="block mb-1 font-medium">Delivery Address</label>
          <textarea id="address" name="address" class="w-full p-2 border border-gray-300 rounded" required></textarea>
        </div>
        <div class="text-center">
          <button type="submit" class="bg-green-600 text-white py-2 px-4 rounded">Place Order</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-green-600 text-white py-4 mt-6">
    <div class="container mx-auto text-center">
      <p>&copy; 2025 Flower Order. All rights reserved.</p>
    </div>
  </footer>

<script>
  // Sections and buttons
  const loginSection = document.getElementById("loginSection");
  const dashboardSection = document.getElementById("dashboardSection");
  const ordersList = document.getElementById("ordersList");

  const showLoginBtn = document.getElementById("showLoginBtn");
  const showDashboardBtn = document.getElementById("showDashboardBtn");
  const logoutBtn = document.getElementById("logoutBtn");

  const loginForm = document.getElementById("loginForm");
  const orderForm = document.getElementById("orderForm");

  const orderModal = document.getElementById("orderModal");
  const closeOrderModalBtn = document.getElementById("closeOrderModal");
  const flowerInput = document.getElementById("flower");

  let currentUser = localStorage.getItem("currentUser") || null;

  function updateNav() {
    if (currentUser) {
      showLoginBtn.classList.add("hidden");
      showDashboardBtn.classList.remove("hidden");
      logoutBtn.classList.remove("hidden");
    } else {
      showLoginBtn.classList.remove("hidden");
      showDashboardBtn.classList.add("hidden");
      logoutBtn.classList.add("hidden");
    }
  }

  function showSection(section) {
    loginSection.classList.add("hidden");
    dashboardSection.classList.add("hidden");
    section.classList.remove("hidden");
  }

  // Show login form
  showLoginBtn.addEventListener("click", () => {
    showSection(loginSection);
  });

  // Show dashboard (orders history)
  showDashboardBtn.addEventListener("click", () => {
    loadOrders();
    showSection(dashboardSection);
  });

  // Logout
  logoutBtn.addEventListener("click", () => {
    currentUser = null;
    localStorage.removeItem("currentUser");
    updateNav();
    showSection(loginSection);
  });

  // Login form submit handler
  loginForm.addEventListener("submit", (e) => {
    e.preventDefault();
    const email = document.getElementById("loginEmail").value.trim();
    const password = document.getElementById("loginPassword").value;

    if (!email || !password) {
      alert("Please enter email and password.");
      return;
    }

    let users = JSON.parse(localStorage.getItem("users")) || {};
    if (!users[email]) {
      users[email] = { password: password, orders: [] };
      localStorage.setItem("users", JSON.stringify(users));
      alert("New user registered. You are logged in.");
    } else {
      if (users[email].password !== password) {
        alert("Incorrect password.");
        return;
      }
      alert("Login successful.");
    }

    currentUser = email;
    localStorage.setItem("currentUser", currentUser);

    updateNav();
    showSection(dashboardSection);

    loginForm.reset();
  });

  // Show order modal on "Order Now" button click
  document.querySelectorAll(".orderNowBtn").forEach((btn) => {
    btn.addEventListener("click", () => {
      if (!currentUser) {
        alert("Please login first to place an order.");
        showSection(loginSection);
        return;
      }
      // Prefill flower input
      flowerInput.value = btn.dataset.flower;
      // Clear other inputs
      orderForm.name.value = "";
      orderForm.email.value = "";
      orderForm.quantity.value = 1;
      orderForm.address.value = "";

      orderModal.classList.remove("hidden");
    });
  });

  // Close modal
  closeOrderModalBtn.addEventListener("click", () => {
    orderModal.classList.add("hidden");
  });

  // Order form submit handler
  orderForm.addEventListener("submit", (e) => {
    e.preventDefault();

    if (!currentUser) {
      alert("Please login first.");
      orderModal.classList.add("hidden");
      showSection(loginSection);
      return;
    }

    const name = orderForm.name.value.trim();
    const email = orderForm.email.value.trim();
    const flower = orderForm.flower.value;
    const quantity = parseInt(orderForm.quantity.value);
    const address = orderForm.address.value.trim();

    if (!name || !email || !flower || !quantity || !address) {
      alert("Please fill out all fields.");
      return;
    }

    const orderId = Math.floor(100000 + Math.random() * 900000);
    const estimatedDeliveryDate = new Date();
    estimatedDeliveryDate.setDate(estimatedDeliveryDate.getDate() + 5);
    const deliveryDateStr = estimatedDeliveryDate.toLocaleDateString();

    const order = {
      orderId,
      name,
      email,
      flower,
      quantity,
      address,
      status: "Pending",
      estimatedDeliveryDate: deliveryDateStr,
      orderDate: new Date().toLocaleDateString(),
    };

    let users = JSON.parse(localStorage.getItem("users")) || {};
    if (!users[currentUser]) {
      users[currentUser] = { password: "", orders: [] };
    }
    users[currentUser].orders.push(order);
    localStorage.setItem("users", JSON.stringify(users));

    alert(`Thank you for your order!\nYour Order ID is: ${orderId}\nEstimated Delivery: ${deliveryDateStr}`);

    orderModal.classList.add("hidden");
  });

  // Load orders for dashboard
  function loadOrders() {
    ordersList.innerHTML = "";
    if (!currentUser) return;

    let users = JSON.parse(localStorage.getItem("users")) || {};
    if (!users[currentUser] || users[currentUser].orders.length === 0) {
      ordersList.innerHTML = "<p class='text-center text-gray-600'>No orders yet.</p>";
      return;
    }

    users[currentUser].orders.forEach((order) => {
      const orderDiv = document.createElement("div");
      orderDiv.classList.add("bg-white", "p-4", "rounded", "shadow");

      orderDiv.innerHTML = `
        <p><strong>Order ID:</strong> ${order.orderId}</p>
        <p><strong>Name:</strong> ${order.name}</p>
        <p><strong>Email:</strong> ${order.email}</p>
        <p><strong>Flower:</strong> ${order.flower}</p>
        <p><strong>Quantity:</strong> ${order.quantity}</p>
        <p><strong>Delivery Address:</strong> ${order.address}</p>
        <p><strong>Status:</strong> ${order.status}</p>
        <p><strong>Order Date:</strong> ${order.orderDate}</p>
        <p><strong>Estimated Delivery:</strong> ${order.estimatedDeliveryDate}</p>
      `;
      ordersList.appendChild(orderDiv);
    });
  }

  // Initial setup
  updateNav();
  if (currentUser) {
    showSection(dashboardSection);
  } else {
    showSection(loginSection);
  }
</script>
</body>
</html>
